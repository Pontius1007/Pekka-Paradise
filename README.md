# Pekka-Paradise
Repository for TDT4140 - Programutvikling 

Link to the page: https://www.facebook.com/LIMBOBOT/

Only testers can interact with the bot in it's current state.
## Code coverage from Coveralls

[![Coverage Status](https://coveralls.io/repos/github/Pontius1007/Pekka-Paradise/badge.svg)](https://coveralls.io/github/Pontius1007/Pekka-Paradise)

## Virtualenvironment set-up

Assuming you already have python 3.6 installed, navigate to your local version of the respository and open cmd. 

`pip install virtualenv` to install virtual env

`virtualenv venv` to set up virtula environment in the folder

`venv\Scripts\activate` to activate the vitual environment (on windows)

`pip install requirements.txt` to install all the needed packages

## Heroku set-up
Make a new user then:

[To set up an app:](https://devcenter.heroku.com/articles/creating-apps)

[Deploying with git:](https://devcenter.heroku.com/articles/git)

### Database set-up

Go to your app dashboard on heroku. Select 'configure add-ons'. Search for Heroku Postres and select your prefered plan.

[Set up Postgres database for your heroku app](https://devcenter.heroku.com/articles/heroku-postgresql)

[What it should look like on your heroku app after the database set-up:](https://gyazo.com/3311b10940752fec07bae087a0cef3e5)

### Config vars

Go to setting on your app dashboard. Select reveal config vars

[It should look like this:](https://gyazo.com/370ec9844b9e31b7dcdce98d14de378c)

DATABASE_URL is set automatically by Heroku when adding Posteges

PAT (Page Access Token) is automatically generated by facebook when connecting your page to your app. (Call the config variable on Heroku PAT not Page Access Token.)

VERIFY_TOKEN you set yourself when making the facebook page. 

## Facebook set-up

[Jump to #2 and follow untill #5 to set up facebook page](https://blog.hartleybrody.com/fb-messenger-bot/)

When you get to the Page Access Token and VERIFY_TOKEN in the facebook tutorial set them on you Heroku app.

If your facebook page does not have a "Send message button". Select add button and add a "send message" button. Then hover over the button and select "test button" from the drop-down menu.

## Creating database tables

Open the commandline and run the following command:

`heroku run python3 db_create.py`

This will make the tables in your database.

Now you have completed the setup and the bot should be working.

## Config variables in virtual environment

The next bit is convenient for development an testing of the bot and is not necessary for the installation.

The following commands are for setting the config variables and are for windows (on linux "set" is replaced with "export"):

`set DATABASE_URL=your_database_url_here`

`set PAT=your_pat_here`

`set VERIFY_TOKEN=your_verify_token_here`
